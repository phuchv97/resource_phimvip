function goRequestPage(e) {
    is_login ? window.location.href = e : $("#sign-form").modal("show")
}

function clearNotify() {
    var e = confirm("Are you sure delete all notify?");
    e && $.ajax({
        url: base_url + "ajax/user_clear_notify",
        method: "POST",
        dataType: "json",
        success: function(e) {
            1 == e.status && window.location.reload()
        }
    })
}
$.ajax({
    url: base_url +"ajax/load_login_status",
    type: "GET",
    dataType: "json",
    success: function(e) {
        $("#top-user").html(e.content), 1 == e.is_login && (is_login = !0)
    }
}), $("#request-form").submit(function(e) {
    var a = $(this).serializeArray(),
        t = $(this).attr("action");
    $.ajax({
        url: t,
        type: "POST",
        data: a,
        dataType: "json",
        success: function(e) {
            if ($(".error-block").hide(), 0 == e.status)
                for (var a in e.messages) $("#error-" + a).show(), $("#error-" + a).text(e.messages[a]);
            1 == e.status && ($("#message-success").show(), setTimeout(function() {
                $("#message-success").hide()
            }, 5e3), document.getElementById("request-form").reset())
        }
    }), e.preventDefault()
});

