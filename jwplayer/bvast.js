jwplayer.vast={},function(a){function b(b){var c;return a.utils.foreach(b,function(a,b){c=c||{},"_adQueue"===a?c[a]=b.slice():c[a]=b}),c}function c(a,b){return"%"===a.toString().slice(-1)?b*parseFloat(a.slice(0,-1))/100:parseFloat(a)}a.vast.schedule=function(){function d(a,b){for(var d=h.length;d--;)if(a>=c(h[d]._offSet,b))return d;return-1}var e,f,g,h=[],i=[];this.setPreRoll=function(a){e=a},this.getPreRoll=function(){return b(e)},this.getPostRoll=function(){return b(g)},this.getNextMidRoll=function(a,c){if(this.sort(c),h.length>i.length){var e=d(a,c);if(e>=0&&i.indexOf(e)<0){var f=h[e];return i.push(e),b(f)}}},this.getMidRolls=function(){var c=[];return a.utils.foreach(h,function(a,d){c.push(b(d))}),c},this.reset=function(){i=[]},this.addMidRoll=function(a){h.push(a)},this.setPostRoll=function(a){g=a},this.sort=function(a){(!a||a<1)&&(a=1),h.sort(function(b,d){return c(b._offSet,a)-c(d._offSet,a)})},this.setVMAP=function(a){f=a},this.isVMAP=function(){return!!f},this.getVMAP=function(){return f}}}(jwplayer),function(a){function b(a){return h.isString(a)?[a]:h.isArray(a)?a.slice(0):a}function c(a){if("start"===a||"0%"===a)return"pre";if("end"===a||"100%"===a)return"post";if("pre"===a||"post"===a||h.indexOf(a,"%")>-1)return a;var b=g.seconds(a);return!!h.isNumber(b)&&b}function d(a,d){var e=d.schedule||d.adschedule;h.each(e,function(e){e.ad&&(g.extend(e,e.ad),delete e.ad);var f=c(e.offset),i={_offSet:f,_type:e.type};f===!1&&g.log("Error: ad offset format not supported",f);var j=e.skipoffset||d.skipoffset;h.isUndefined(j)||(i.skipoffset=j);var k=e.adbreakid;k&&(i.adbreakid=k);var l=e.adtagid;if(l&&(i._adTagQueue=b(l)),e.tag)i._adQueue=b(e.tag),i._waterfallIndex=0;else{if(!h.isString(e.vastxml))return void g.log("Error: no ad tag provided");i._adXML=e.vastxml}switch(f){case"pre":a.setPreRoll(i);break;case"post":a.setPostRoll(i);break;default:a.addMidRoll(i)}})}function e(c){var e=new a.vast.schedule;if(c.tag)e.setPreRoll({_offSet:"pre",_adQueue:b(c.tag),_waterfallIndex:0});else if(h.isString(c.vastxml))e.setPreRoll({_offSet:"pre",_adXML:c.vastxml});else{if(h.isString(c.schedule))return e.setVMAP(c.schedule),e;if(h.isString(c.adschedule))return e.setVMAP(c.adschedule),e;d(e,c)}return e.sort(),e}function f(a){var b={cuetext:a.cuetext||l,dynamicMessage:a.admessage||i,podMessage:a.podmessage||j,skipoffset:a.skipoffset||k,skipMessage:a.skipmessage||m,skipText:a.skiptext||n},c=a.companiondiv;return c&&(b.companion={id:c.id,height:c.height,width:c.width}),b}var g=a.utils,h=a._,i="This ad will end in xx seconds.",j="Ad __AD_POD_CURRENT__ of __AD_POD_LENGTH__. ",k=-1,l="Advertisement",m="Skip ad in xx",n="Skip";a.vast.configparser={getSchedule:e,getOptParams:f}}(jwplayer),function(a){function b(a,b,c){return a.replace(b,c)}function c(a){var b=a.getConfig();return{playerHeight:a.getHeight()||b.height||"",playerWidth:a.getWidth()||b.width||"",itemDuration:d(a.getDuration(),3)||"",item:b.playlist[a.getPlaylistIndex()]||{}}}function d(a,b){var c=Math.pow(10,b);return Math.round(a*c)/c}a.vast.doReplacement=function(d,e,f,g){if(!d)return d;var h=c(e),i=h.item,j=window.location.href;d=b(d,"__random-number__",Math.random()*Math.pow(10,18)),d=b(d,"__timestamp__",(new Date).getTime()),d=b(d,"__page-url__",encodeURIComponent(j)),d=b(d,"__referrer__",encodeURIComponent(document.referrer)),d=b(d,"__player-height__",h.playerHeight),d=b(d,"__player-width__",h.playerWidth),d=b(d,"__item-duration__",h.itemDuration),d=b(d,"__domain__",encodeURIComponent(f)),d=g.companion?b(d,"__companion-div__",g.companion.id):b(d,"__companion-div__","");for(var k=d.match(new RegExp(/__item-[a-z 0-9 A-Z]*__/g)),l=0;k&&l<k.length;l++){var m=k[l],n=m.substring(7,m.length-2);if(i.hasOwnProperty(n)&&a._.isString(i[n])){var o=i[n];o.length>1e3&&(o=o.substring(0,1e3)),d=b(d,m,encodeURIComponent(o))}else d=b(d,m,"")}return d}}(window.jwplayer),function(a){function b(a,b,c){var d=[];return a&&(d=a.getElementsByTagName(b),c&&d&&0===d.length&&(d=a.getElementsByTagName(c+":"+b))),d}function c(a,b){return a?a.getAttribute(b):null}function d(a){if(a){var b=a.textContent||a.text;if(b)return g.trim(b)}return""}function e(a,b){var e=c(b,"event");if("progress"===e){var g=c(b,"offset");e=e+"_"+g}var h=d(b);f(a,e,h)}function f(a,b,c){a[b]||(a[b]=[]),c&&a[b].push(c)}var g=a.utils,h="vmap";a.vast.vmapparser=function(a,f){for(var i=b(a,"AdBreak",h),j=0;j<i.length;j++){var k={},l={},m=i[j],n=c(m,"timeOffset"),o=c(m,"breakType"),p=b(m,"AdTagURI",h)[0],q=b(m,"VASTData",h)[0]||b(m,"VASTAdData",h)[0],r=c(p,"templateType"),s=d(p),t=b(m,"TrackingEvents",h)[0],u=b(t,"Tracking",h);if(k._type=o,q)k._adXML=b(q,"VAST")[0];else{if("vast1"!=r&&"vast2"!=r&&"vast3"!=r)continue;k._adQueue=[s],k._waterfallIndex=0}if(u)for(var v=0;v<u.length;v++)e(l,u[v]);switch(k._trackers=l,k._type=o,n){case"start":k._offSet="pre",f.setPreRoll(k);break;case"100%":case"end":k._offSet="post",f.setPostRoll(k);break;default:if(/^#/.test(n))break;/^\d\d?(?:\.\d+)?%$/.test(n)?k._offSet=n:k._offSet=g.seconds(n),f.addMidRoll(k)}}f.sort()},a.vast.vparser=function(a){function h(a){var d,e,f,g=[];"VAST"===a.nodeName?d=a:(d=b(a,"VAST")[0],d||(d=b(a,"VideoAdServingTemplate")[0])),d||k(101,"Invalid VAST response"),e="VideoAdServingTemplate"===d.tagName?1:parseFloat(c(d,"version")||0),f=b(d,"Ad");for(var h=0;h<f.length;h++){var j=i(e,f[h]);j.vastversion=e,g.push(j)}r=g}function i(a,e,f){f=f||{};var g,h=b(e,"InLine")[0],i=b(e,"Wrapper")[0],o=h?h:i,p=o?d(b(o,"AdTitle")[0]):"";return f.sequence=c(e,"sequence"),f.adTitle=p,(!a||a>3||a<1)&&k(102,"Vast version not supported"),o?(a>=2?(g=m(o),l(o,"Impression",g.trackers),l(o,"Error",g.trackers)):g=n(o),i&&(g.wrappedURI=d(b(i,"VASTAdTagURI")[0])||d(b(i,"VASTAdTagURL")[0])),g=j(f,g)):k(101,"Invalid VAST response"),g}function j(a,b){var c=g.extend({},a);return g.foreach(b,function(a,d){g.exists(c[a])?"array"==g.typeOf(d)?c[a]=c[a].concat(d):"object"==g.typeOf(d)?c[a]=g.extend(c[a],b[a]):c[a]=d:c[a]=d}),c}function k(a,b){throw s={code:a,message:b,toString:function(){return this.code+" "+this.message}}}function l(a,c,e){var g,h=b(a,c);for(g=0;g<h.length;g++)f(e,c.toLowerCase(),d(h[g]))}function m(a){var g,h,i,j,k,l,m,n,r,s=b(b(a,"Creatives")[0],"Creative"),t={},u={trackers:t};for(u.adsystem=d(b(a,"AdSystem")[0]),h=0;h<s.length;h++){if(g=s[h],j=b(g,"Linear")[0],k=b(g,"NonLinear")[0],l=b(b(g,"TrackingEvents")[0],"Tracking"),j||k)for(i=0;i<l.length;i++)e(t,l[i]);if(m=d(b(g,"AdParameters")[0]),m&&(u.adParams=m),j){n=b(j,"VideoClicks")[0],r=d(b(n,"ClickThrough")[0]);for(var v=b(n,"ClickTracking"),w=c(j,"skipoffset"),x=0;x<v.length;x++)f(t,"click",d(v[x]));r&&(u.clickthrough=r),w&&(u.skipoffset=w),o(j,u)}else k?(r=d(b(k,"NonLinearClickThrough")[0]),r&&(u.clickthrough=r),p(g,u)):q(g,u)}return u}function n(a){var g,h,i,j,k,l,m,n,p,q,r,s,t=b(a,"Video")[0]||a,u=b(a,"NonLinear")[0],v={},w={trackers:v};if(t){for(g=b(b(a,"TrackingEvents")[0],"Tracking"),h=0;h<g.length;h++)e(v,g[h]);for(j=b(b(a,"Impression")[0],"URL"),h=0;h<j.length;h++)i=j[h],f(v,"impression",d(i));for(k=b(b(a,"Error")[0],"URL"),h=0;h<k.length;h++)i=k[h],f(v,"error",d(i));n=b(t,"VideoClicks")[0],p=d(b(n,"ClickThrough")[0]);for(var x=b(b(n,"ClickTracking")[0],"URL"),y=0;y<x.length;y++)f(v,"click",d(x[y]));if(p&&(w.clickthrough=p),q&&f(v,"click",q),o(t,w),r=b(t,"AdParameters")[0],r&&(s=c(r,"apiFramework"),"vpaid"==s.toLowerCase())){for(var z=0;z<w.media.length;z++)w.media[z].adType=s;w.adParams=d(r)}}if(u){var A=w.media||[],B=b(u,"URL")[0];A.push({type:c(u,"creativeType"),file:d(B),adType:c(u,"apiFramework")}),w.media=A}for(l=b(a,"CompanionAds")[0],l=b(l,"Companion"),w.companions||(w.companions=[]),h=0;h<l.length;h++)m=l[h],w.companions.push({width:parseInt(c(m,"width"),10),height:parseInt(c(m,"height"),10),type:c(m,"resourceType"),resource:d(b(m,"URL")[0]),trackers:[],clickthrough:""});return w}function o(a,e){for(var f=b(b(a,"MediaFiles")[0],"MediaFile"),g=e.media?e.media:[],h=0;h<f.length;h++){var i=f[h],j={type:c(i,"type"),file:d(i),adType:c(i,"apiFramework")||"",width:parseInt(c(i,"width"))||0,height:parseInt(c(i,"height"))||0};j.file&&g.push(j)}e.media=g}function p(a,e){var f=[],g=b(a,"StaticResource")[0];g&&(f.push({type:c(g,"creativeType"),file:d(g),adType:c(b(a,"NonLinear")[0],"apiFramework")||"static",minDuration:c(b(a,"NonLinear")[0],"minSuggestedDuration")||"00:00:00"}),e.media=f)}function q(a,e){var g,h,i,j,k,l,m,n,o,p,q=b(b(a,"CompanionAds")[0],"Companion"),r=e.companions?e.companions:[];for(h=0;h<q.length;h++){g=q[h],j=b(g,"StaticResource")[0],k=b(g,"IFrameResource")[0],l=b(g,"HTMLResource")[0];var s={};if(j)m=c(j,"creativeType"),n=d(j);else if(k)m="iframe",n=d(k);else{if(!l)return;m="html",n=d(l)}var t=b(b(g,"TrackingEvents")[0],"Tracking");for(i=0;i<t.length;i++)o=c(t[i],"event"),f(s,o,d(t[i]));p=d(b(g,"CompanionClickThrough")[0]),r.push({width:parseInt(c(g,"width"),10),height:parseInt(c(g,"height"),10),type:m,source:n,trackers:s,clickthrough:p})}e.companions=r}var r=[],s=null;a&&h(a),this.parse=h,this.parsedAds=function(){return r},this.error=function(){return s}}}(window.jwplayer),function(a){function b(a){return c(a)?a:f.parseXML(a)}function c(a){return"object"==typeof Node?a instanceof Node:a&&"object"==typeof a&&"number"==typeof a.nodeType&&"string"==typeof a.nodeName}var d=a.jwplayer,e=d.events,f=d.utils,g=d._,h=d.vast;h.vloader=function(a,c,d){function i(){var a=c.getContainer();return a.querySelector("object")}function j(a,b){var d=c.id+":vast:"+b.name+":"+Math.random().toString(16).substr(2);return a.on(d,b,A),d}function k(a){var b=function(b){m(b,a)},d=function(b,d){if(c){var h=i();return h&&"Invalid XML"!==b&&"Timeout"!==b&&f.crossdomain(d)?void h.triggerFlash("loadXml",d,j(h,e),j(h,g)):void t(b,a)}},e=function(b){A.parseXmlString(b,a)},g=function(b){f.log(b),t(b,a)};return f.ajax(a,b,d,{withCredentials:!0,retryWithoutCredentials:!0,requireValidXML:!0,timeout:5e3})}function l(a){a&&(a.onload=null,a.onreadystatechange=null,a.onerror=null,a.abort&&a.abort())}function m(b,g){y=y||new h.vparser;try{y.parse(b.responseXML)}catch(i){return void w(i.message,i.code||900,g)}var j=y.parsedAds();j&&j.length?(C=j,d.wrapper=d.wrapper||[],d.wrapper.push(C[0].adsystem),f.foreach(C,function(b,f){if(f.wrappedURI){var g=new h.vloader(a,c,d);g.on(e.COMPLETE,function(){o(f,g.allAds())}),g.on(e.ERROR,function(a){v(a.message,a.code,a.url),n(f,g)}),g.load(f.wrappedURI)}else d.wrapper.length>1&&(f.wrapper=d.wrapper.slice(0,-1))}),r()):w("Ad Tag Empty",101,g)}function n(a,b){var c=g.indexOf(C,a);C.splice(c,1),b.destroy(),r()}function o(a,b){var c=p(a,b),d=g.indexOf(C,a);Array.prototype.splice.apply(C,[d,1].concat(c)),r()}function p(a,b){var c=[];return f.foreach(b,function(b,d){a.companions&&(d.companions=(d.companions?d.companions:[]).concat(a.companions)),a.trackers&&(d.trackers=q(d.trackers,a.trackers)),a.sequence&&(d.sequence=a.sequence),c.push(d)}),c}function q(a,b){return a=a||{},f.foreach(b,function(b,c){a[b]?a[b]=a[b].concat(c):a[b]=c}),a}function r(){var a=!1;f.foreach(C,function(b,c){c.wrappedURI&&(a=!0)}),a||s()}function s(){for(var a=C.slice(0),b=a.length,c=a.length;c--;){var d=a[c];d.media&&d.media.length||a.length--}var f=0===b,g=a.length!==b;return f||g?void w("Ad Tag Empty",101,B[B.length-1]):void x(e.COMPLETE,{vloader:A})}function t(a,b){"Invalid XML"===a?w(a,100,b):w("VAST could not be loaded",301,b)}function u(){return B&&B.length?B[0]:""}function v(a,b,c){return 1===C.length?void w(a,b,c):void A.trigger("adPodError",{message:a,code:b,vloader:A,url:u()||c,wrappedUrl:c})}function w(a,b,c){D||(D=!0,A.trigger(e.ERROR,{message:a,code:b,vloader:A,url:u()||c,wrappedUrl:c}))}function x(a,b){return A.trigger(a,b)}var y,z,A=this,B=[],C=[],D=!1;d=d||{},f.extend(A,c.Events),A.load=function(a){B.push(a),D=!1,z=k(a)},A.destroy=function(){l(z),c=null},A.scheduledAd=function(){return a},A.allAds=function(){return C},A.adPod=function(){var a=[];return f.foreach(C,function(b,c){c.sequence&&a.push(c)}),a.sort(function(a,b){return a.sequence-b.sequence}),a},A.adBuffet=function(){var a=[];return f.foreach(C,function(b,c){c.sequence||a.push(c)}),a},A.history=function(){return B},A.parseXmlString=function(a,c){m({responseXML:b(a)},c)}}}(window),function(a){a.vast.companion=function(b){function c(a){if(a=a.creativeView){for(var c=0;c<a.length;c++){var d=new Image;d.src=a[c]}k.isFunction(b)&&b({type:"companion",data:{trackers:a}})}}function d(a,b,c){var d=document.createElement("param");d.setAttribute("name",b),d.setAttribute("value",c),a.appendChild(d)}function e(a){if(i.removeCompanion(),"html"==a.type)return h.innerHTML=a.source,void c(a.trackers);if("iframe"==a.type){var b=document.createElement("iframe");return b.height=g.height,b.width=g.width,b.src=a.source,b.scrolling="no",b.style.border="none",b.marginWidth=0,b.marginHeight=0,c(a.trackers),h.innerHTML="",void h.appendChild(b)}if("application/x-shockwave-flash"==a.type){if(j.isMSIE()){var e='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" " width="100%" height="100%"id="'+h.id+'" name="'+h.id+'" tabindex=0"">';e+='<param name="movie" value="'+a.source+'">',e+='<param name="allowfullscreen" value="true">',e+='<param name="allowscriptaccess" value="always">',e+='<param name="scale" value="exactfit">',e+='<param name="seamlesstabbing" value="true">',e+='<param name="wmode" value= "opaque">',e+="</object>",h.innerHTML=e}else{var f=document.createElement("object");f.setAttribute("type","application/x-shockwave-flash"),f.setAttribute("data",a.source),f.setAttribute("width","100%"),f.setAttribute("height","100%"),f.setAttribute("tabindex",0),d(f,"allowfullscreen","true"),d(f,"allowscriptaccess","always"),d(f,"seamlesstabbing","true"),d(f,"wmode","opaque"),h.appendChild(f)}return void c(a.trackers)}var k=new Image;k.src=a.source,j.exists(a.clickthrough)&&(k.onclick=function(){var b=window.open(a.clickthrough,"_blank");b.focus()}),h.innerHTML="",h.appendChild(k),c(a.trackers)}function f(a){return a.width==g.width&&a.height==g.height}var g,h,i=this,j=a.utils,k=a._;i.addCompanion=function(a,b){if(g=a,h=document.getElementById(g.id),!h)return!1;for(var c=0;c<b.length;c++)if(f(b[c]))return e(b[c]),!0;return!1},i.removeCompanion=function(){h.innerHTML=""}}}(window.jwplayer),function(a){var b=a.utils,c=a._,d="[ERRORCODE]";a.vast.tracker=function(a,e){function f(b){return a.hasOwnProperty(b)?a[b]:[]}function g(a,b){var d,g,h,i=f(a),j=[];for(d=0;d<i.length;d++)if(g=i[d]){if(b)for(var k in b)if(b.hasOwnProperty(k)){var l=b[k];g=g.replace(k,l)}h=new Image,h.src=g,j.push(g)}c.isFunction(e)&&e({type:"ping",data:{pingType:a,urls:j}})}function h(){o.started=!0,g("start")}function i(){o.started=!0,g("breakStart")}function j(a,b){if(!(b<=1)){for(var c=(4*a+.05)/b|0;c>n&&n<3;)n++,1===n?g("firstQuartile"):2===n?g("midpoint"):3===n&&g("thirdQuartile");k(a,b)}}function k(a,b){for(var c=p.length;c--;){var d=p[c];if(!d.tracked){var e=d.offset;d.percentage&&(e=b*e/100),a>=e&&(d.tracked=!0,g(d.key))}}}function l(a){o.firedError=!0,a=a||900;var b={};b[d]=a,g("error",b)}function m(a){return function(){g(a)}}var n=0,o=this,p=[];for(var q in a)if(a.hasOwnProperty(q)&&0===q.indexOf("progress")){var r=""+q.split("_")[1],s={key:q,offset:r,tracked:!1,percentage:!1};/^\d+%$/.test(r)?(s.percentage=!0,s.offset=parseFloat(r)):s.offset=b.seconds(r),p.push(s)}o.started=!1,o.firedError=!1,o.hasComp=!1,o.addUrl=function(b,c){a.hasOwnProperty(b)?a[b].push(c):(a[b]=[],a[b].push(c))},o.creativeView=m("creativeView"),o.start=h,o.click=m("click"),o.skip=m("skip"),o.complete=m("complete"),o.pause=m("pause"),o.resume=m("resume"),o.mute=m("mute"),o.unmute=m("unmute"),o.fullscreen=m("fullscreen"),o.expand=m("expand"),o.collapse=m("collapse"),o.acceptInvitation=m("acceptInvitation"),o.close=m("close"),o.rewind=m("rewind"),o.impression=m("impression"),o.breakStart=i,o.breakEnd=m("breakEnd"),o.time=j,o.error=l}}(window.jwplayer),function(a){var b=a.utils,c=b.UI,d=a.events,e=d.JWPLAYER_MEDIA_TIME,f={CLICK:"onClick",PLAY:"onPlay",PAUSE:"onPause",ERROR:"onError",COMPLETE:"onComplete"},g=document.createElement("img"),h=document.createElement("img"),i={cursor:"pointer",position:"absolute",margin:"auto",left:0,right:0,bottom:0,display:"block"},j="opacity 0.2s",k={"-webkit-transition":j,transition:j},l=function(a,d,e,i){function j(){clearTimeout(x),z.trigger(f.ERROR),v()}function k(){z.trigger(f.CLICK)}function l(){r(h)}function m(){r(h,.75)}function n(){r(g)}function o(){r(g,.5)}function p(a){y===-1&&(a.preventDefault(),i.onmouseover=i.onmouseout=null,s([w,h,g]),i.appendChild(g),y=setTimeout(function(){t(w),t(h),r(g,.5),i.onmouseover=n,i.onmouseout=o,y=-1},250))}function q(a){y===-1&&(a.preventDefault(),i.onmouseover=i.onmouseout=null,i.appendChild(w),i.appendChild(h),y=setTimeout(function(){r([w,h]),i.onmouseover=l,i.onmouseout=m,y=-1},50),s(g))}function r(a,c){b.style(a,{opacity:c||1})}function s(a){b.style(a,{opacity:0})}function t(a){i.contains(a)&&i.removeChild(a)}function u(){w.onload=w.onerror=null}function v(){u(),t(w)}var w,x=-1,y=-1,z=this;b.extend(this,a.Events),w=document.createElement("img"),w.className="jw-banner",w.id=a.id+"_vast_static",s([h,g]),t(g),i.appendChild(w),i.appendChild(h),x=setTimeout(j,5e3),w.onerror=j,w.onload=function(){return clearTimeout(x),0===w.naturalWidth?j():(u(),b.style(h,{top:-w.height-8,bottom:w.height-8,left:w.width},!0),b.style(g,{top:-16},!0),r([i,w]),r(h,.75),new c(w).on("click tap",k),b.isMobile()||(i.onmouseover=l,i.onmouseout=m),h.onclick=h.ontouchstart=p,g.onclick=g.ontouchstart=q,void z.trigger(f.PLAY))},w.src=d,z.removeListeners=function(){clearTimeout(x),clearTimeout(y),i.onmouseover=i.onmouseout=h.onclick=g.onclick=null,z.off(),u()},z.stop=function(){s([i,w,h,g]),setTimeout(v,400),t(h),t(g)}};g.src=h.src='data:image/svg+xml;charset=UTF-8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 64 64"><circle cx="32" cy="32" r="32" fill="#191919"/><line stroke="#CCC" stroke-width="6" x1="32" y1="20" x2="32" y2="44"/><line stroke="#CCC" stroke-width="6" x1="20" y1="32" x2="44" y2="32"/></svg>',a.vast.staticplayer=function(a,c){function j(a){v.trigger(e,a)}function m(){w=a.getPosition(),x>0&&(0===w?v.on(e,n):v.on(e,o)),r(f.PLAY)}function n(a){w=a.position,v.off(e,n),v.on(e,o)}function o(a){var b=a.position-w;b>x&&(v.off(e,o),v.stop())}function p(){r(f.CLICK)}function q(){r(f.ERROR)}function r(a,b){b=b||{},b.tag=b.tag||u,v.trigger(a,b)}function s(a){return function(b){v.on(a,b)}}var t,u,v=this,w=0,x=0;b.extend(this,a.Events),v.type="static",a.onTime(j),v.playAd=function(d,e,j,n,o){x=b.seconds(n),u=o,t&&(t.removeListeners(),t.stop()),c.style.opacity=0,c.style.visibility="visible";var r=b.isFF()?{}:k;b.style(c,b.extend({top:"",position:"absolute",width:"100%"},r)),b.style([h,g],b.extend({width:"18px",height:"18px",opacity:.75},i,r)),b.style(h,{transform:"rotate(45deg)"}),t=new l(a,e,j,c),t.on(f.PLAY,m),t.on(f.CLICK,p),t.on(f.ERROR,q)},v.removeEvents=function(){v.off()},v.getState=function(){return d.state.PLAYING},v.stop=function(){w&&t&&(w=0,x=0,v.off(e,n),v.off(e,o),t.removeListeners(),t.stop(),r(f.COMPLETE))},v.pause=function(){},v.onPlay=s(f.PLAY),v.onComplete=s(f.COMPLETE),v.onClick=s(f.CLICK),v.onError=s(f.ERROR)}}(window.jwplayer),function(a){var b=a.vast,c=a.events.state,d=a.utils,e=a._;b.vpaidplayer=function(a,b,f,g,h){function i(){F(P,n),F(R,o),F(Q,p),F(T,s),F(U,t),F(_,w),F(aa,x),F(S,u),F(Z,v),F(V,y),F($,q),F(ba,r),F(ca,k),F(W,z),F(X,A),F(Y,B);var b=a.getSafeRegion(!1);D("initAd",b.width,b.height+b.y,j(),0,h)}function j(){return a.getFullscreen()?"fullscreen":"normal"}function k(){l(O.ERROR)}function l(a,b){N||(b=b||{},b.linear=K.linear?"linear":"nonlinear",b.tag=g,I.trigger(a,b))}function m(a){a&&(e.isBoolean(a.linear)&&(K.linear=a.linear),e.isBoolean(a.expanded)&&(K.expanded=a.expanded),e.isNumber(a.remainingTime)&&(K.remainingTime=a.remainingTime))}function n(b){s(b),E("adVolume",a.getMute()?0:a.getVolume()/100),D("startAd")}function o(a){m(a),a.linear&&I.blocking&&I.blocking.hide(),l(O.STARTED),l(O.PLAY,{oldstate:c.BUFFERING,newstate:c.PLAYING})}function p(a){m(a),l(O.IMPRESSION)}function q(a){m(a),l(O.CLICK)}function r(a){m(a),l(O.SKIPPED)}function s(b){m(b);var c,d,e;if(b.linear){if(I.blocking)I.blocking.hide();else{J=!0,a.setControls(!1);var f=a.getState();f!==f.PLAYING&&f!==f.BUFFERING||a.pause(!0)}e=a.getSafeRegion(!1),d=e.height+e.y,c=e.width}else I.blocking?(I.blocking.destroy(),I.blocking=null):J&&(a.play(!0),a.setControls(!0)),e=a.getSafeRegion(!0),d=e.height+e.y,c=e.width;D("resizeAd",c,d,j())}function t(a){m(a),l(O.EXPANDED_CHANGE,{expanded:K.expanded})}function u(b){m(b),J&&(a.play(!0),a.setControls(!0)),l(O.STOPPED)}function v(){l(O.COMPLETE)}function w(a){m(a),L||(L=!0,l(O.PAUSE,{newstate:c.PAUSED,oldstate:c.PLAYING}))}function x(a){m(a),L&&(L=!1,l(O.PLAY,{newstate:c.PLAYING,oldstate:c.PAUSED}))}function y(a){m(a),l(O.REMAINING_TIME,{remainingTime:a.remainingTime})}function z(a){C(1,a)}function A(a){C(2,a)}function B(a){C(3,a)}function C(a,b){m(b),l("quartile",{quartile:a,remainingTime:b.remainingTime})}function D(){var a=Array.prototype.slice.call(arguments);a.unshift("vast:callVpaid"),b.triggerFlash.apply(b,a)}function E(a,c){b.triggerFlash("vast:setVpaidProperty",a,c)}function F(a,c){b.triggerFlash("vast:addVpaidListener",a,G(c))}function G(c){var d=a.id+":vast:"+c.name+":"+Math.random().toString(16).substr(2);return b.on(d,c,I),d}function H(a){return function(b){this.on(a,b)}}var I=e.extend(this,a.Events),J=!1,K={linear:!1,expanded:!1,remainingTime:-1},L=!1,M=-1,N=!1,O={QUARTILE:"quartile",REMAINING_TIME:"remainingTimeChange",SKIPPED:"skipped",STARTED:"started",STOPPED:"stopped",CLICK:"click",PLAY:"play",IMPRESSION:"impression",PAUSE:"pause",ERROR:"error",COMPLETE:"complete",CLOSE:"close",EXPANDED_CHANGE:"expandedChange"},P="AdLoaded",Q="AdImpression",R="AdStarted",S="AdStopped",T="AdLinearChange",U="AdExpandedChange",V="AdRemainingTimeChange",W="AdVideoFirstQuartile",X="AdVideoMidpoint",Y="AdVideoThirdQuartile",Z="AdVideoComplete",$="AdClickThru",_="AdPaused",aa="AdPlaying",ba="AdSkipped",ca="AdError";I.type="vpaid",I.blocking=null,I.setVolume=function(a){E("adVolume",a/100)},I.onQuartile=H(O.QUARTILE),I.onRemainingTimeChange=H(O.REMAINING_TIME),I.onSkipped=H(O.SKIPPED),I.onComplete=H(O.COMPLETE),I.onStopped=H(O.STOPPED),I.onClick=H(O.CLICK),I.onPlay=H(O.PLAY),I.onPause=H(O.PAUSE),I.onImpression=H(O.IMPRESSION),I.onError=H(O.ERROR),I.onStarted=H(O.STARTED),I.onClose=H(O.CLOSE),I.onExpandedChange=H(O.EXPANDED_CHANGE),I.play=function(){D("resumeAd")},I.pause=function(){D("pauseAd")},I.stop=function(){D("stopAd")},I.resize=function(){var b=a.getSafeRegion(!K.linear);D("resizeAd",b.width,b.height+b.y,j())},I.removeEvents=function(){I.off()},I.destroy=function(){I.removeEvents(),b.off(null,null,I),I.blocking=null},I.getState=function(){return K.linear?L?c.PAUSED:c.PLAYING:c.IDLE},d.isChrome()&&b.on("throttle",function(a){clearTimeout(M),"resume"===a.state?(N=!1,x(K),D("resumeAd")):M=setTimeout(function(){D("pauseAd"),w(K),N=!0},250)},this),b.triggerFlash("vast:loadVpaid",f,G(i),G(k))}}(window.jwplayer),function(a){var b=a.vast,c=a.events.state;b.vpaidplayerjs=function(a,b,d,e){function f(a,b){b=b||{},b.tag||(b.tag=d),n.trigger(a,b)}function g(a,b){f("quartile",{quartile:b,duration:a.getAdDuration()})}function h(a){return function(b){n.on(a,b)}}function i(b,c){var d=document.createElement("iframe");d.src="javascript:false",d.style.border="0px",d.style.width="100%",d.style.height="100%",d.style.position="relative",d.style.overflow="hidden",d.scrolling="no";var e=a.getContainer(),f=e.getElementsByClassName("jw-media")[0];f.appendChild(d),o.push(d);var g=d.contentWindow.document;return g.open().write("<body onload=\"var js = document.createElement('script');js.src = '"+b+"';js.addEventListener('load', function() { window.myCallback(); });document.body.appendChild(js);\" style=\"margin: 0\">"),d.contentWindow.myCallback=c,g.close(),d}function j(b){return{AdLoaded:function(){b.startAd()},AdStarted:function(){b.getAdLinear()&&n.blocking&&n.blocking.hide(),f("started"),f("play",{oldstate:c.BUFFERING,newstate:c.PLAYING,linear:b.getAdLinear()?"linear":"nonlinear"})},AdStopped:function(){k(o),a.setControls(!0),f("stopped")},AdPaused:function(){q||(q=!0,f("pause",{newstate:c.PAUSED,oldstate:c.PLAYING}))},AdPlaying:function(){q&&(q=!1,f("play",{newstate:c.PLAYING,oldstate:c.PAUSED,linear:b.getAdLinear()?"linear":"nonlinear"}))},AdLinearChange:function(){if(b.getAdLinear())if(n.blocking)n.blocking.hide();else{a.setControls(!1);var c=a.getState();c!==c.PLAYING&&c!==c.BUFFERING||a.pause(!0)}else n.blocking?(n.blocking.destroy(),n.blocking=null):(a.play(!0),a.setControls(!0))},AdDurationChange:function(){f("remainingTimeChange",{duration:b.getAdDuration(),remainingTime:b.getAdRemainingTime()})},AdRemainingTimeChange:function(){f("remainingTimeChange",{duration:b.getAdDuration(),remainingTime:b.getAdRemainingTime()})},AdExpandedChange:function(){f("expandedChange",{expanded:b.getAdExpanded()})},AdSkipped:function(){f("skipped")},AdVideoFirstQuartile:function(){g(b,1)},AdVideoMidpoint:function(){g(b,2)},AdVideoThirdQuartile:function(){g(b,3)},AdVideoComplete:function(){f("complete")},AdUserClose:function(){f("close")},AdImpression:function(){f("impression",{linear:b.getAdLinear()?"linear":"nonlinear"})},AdClickThru:function(a,b,c){c&&window.open(a),f("click",{id:b})},AdError:function(a,b){k(o),f("error",{message:a,code:b})}}}function k(a){for(;a.length>0;){var b=a.pop();b.parentNode&&b.parentNode.removeChild(b)}}var l=a._,m=a.Events,n=this,o=[],p={linear:!1,expanded:!1,remainingTime:-1},q=!1;this.type="vpaid",this.blocking=null;var r=function(){var b=n.vpaidAd=s.contentWindow.getVPAIDAd(),c=b.handshakeVersion("2.0");if(parseFloat(c)<1)throw"Invalid vpaid version in handshake";n.Listeners=j(b),l.each(n.Listeners,b.subscribe,b);var d="normal",f=1e3,g={AdParameters:e},h=a.getContainer(),i=h.getElementsByClassName("jw-media")[0],k=i.getElementsByTagName("video")[0],m=s.contentWindow.document.createElement("div");m.className="jw-vpaid-wrapper",m.style.height="100%",s.contentWindow.document.body.appendChild(m),k?k.removeAttribute("preload"):(k=document.createElement("video"),k.setAttribute("webkit-playsinline",""),i.insertBefore(k,s),o.push(k));var p={videoSlot:k,slot:m};b.initAd(i.clientWidth,i.clientHeight,d,f,g,p)},s=i(b,r);l.extend(this,m,{play:function(){n.vpaidAd.resumeAd()},pause:function(){n.vpaidAd.pauseAd()},stop:function(){if(n.vpaidAd)try{n.vpaidAd.stopAd()}catch(a){console.log("Unhandled exception from VPAID2 Creative stopAd",a)}},setVolume:function(a){n.vpaidAd.setAdVolume(a/100)},resize:function(){},destroy:function(){if(k(o),n.removeEvents(),n.vpaidAd)try{l.each(n.Listeners,n.vpaidAd.unsubscribe)}catch(a){console.log("Unhandled exception from VPAID2 Creative",a)}n.blocking=null},removeEvents:function(){n.off()},onTime:h("time"),onComplete:h("complete"),onClose:h("close"),onClick:h("click"),onPlay:h("play"),onPause:h("pause"),onError:h("error"),onImpression:h("impression"),onExpandedChange:h("expandedChange"),onSkipped:h("skipped"),onStopped:h("stopped"),onStarted:h("started"),onQuartile:h("quartile"),onRemainingTimeChange:h("remainingTimeChange"),getState:function(){return p.linear?q?c.PAUSED:c.PLAYING:c.IDLE}})}}(window.jwplayer),function(a){function b(a){for(var b=[],c=0;c<a.length;c++){var d,e=a[c],f="iframe"===e.type||"html"===e.type?e.type:"static";e.trackers&&e.trackers.creativeView&&e.trackers.creativeView.length&&(d=e.trackers.creativeView);var g={width:e.width,height:e.height,type:f,resource:e.source,creativeview:d,click:e.clickthrough};b.push(g)}return b}function c(a){for(var b=[],c=0;a&&c<a.length;c++)a[c].type.indexOf("flash")<0&&b.push(a[c]);return b}var d=a.jwplayer,e=d.vast,f=d.utils,g=d._,h=d.events,i=15e3;d.vast.adplayer=function(j,k,l,m,n,o,p){function q(){var a=k.getProvider();return 0===a.name.indexOf("flash")?"flash":a.name}function r(){var a=k.getContainer();return a.querySelector("object")}function s(a){return"application/javascript"===a.type||"application/x-javascript"===a.type}function t(a){return s(a)?"html5":"flash"}function u(){if(ha.blocking){var a=ha.blocking;ha.blocking=null,v(a)}}function v(a){a&&a!==ia&&a.destroy()}function w(){k&&(k.off(h.JWPLAYER_FULLSCREEN,H),k.off(h.JWPLAYER_MEDIA_VOLUME,I),k.off(h.JWPLAYER_MEDIA_MUTE,J)),ia&&ia.off(),ha&&(ha.removeEvents(),u()),l.stop(),l.removeEvents()}function x(a){a.tracker=new e.tracker(a.trackers,p)}function y(){var a=na._adQueue||{},b={id:na._id,tag:na._currentTag,client:"vast",witem:na._waterfallIndex||1,wcount:a.length||1};return ka&&ka.length&&(b.sequence=sa+1,b.podcount=ka.length),ja&&(b.creativetype=ja),b}function z(a){qa=a,qa.tracker.linear="nonlinear";var b=qa.media[0];qa.selectedMedia=b;var c=qa.clickthrough||"",d=l;d.removeEvents();var e=r();d.onPlay(M),d.onPlay(N),d.onComplete(T),d.onClick(Z),d.onError(da),d.playAd(e,b.file,c,b.minDuration,na._currentTag)}function A(a,b){la=setTimeout(function(){G("VPAID tag communication timeout")},i),qa=b,pa=null;for(var c,d="flash"===q(),f=0;f<qa.media.length;f++){var g=qa.media[f];if(d){c=g;break}if("html5"===t(g)){c=g;break}}if(!c)return G("No Compatible Creatives",403),!1;if(qa.selectedMedia=c,ja=c.type,"flash"===t(c)){var h=r();ha=new e.vpaidplayer(k,h,c.file,na._currentTag,qa.adParams)}else ha=new e.vpaidplayerjs(k,c.file,na._currentTag,qa.adParams);return ha.blocking=a,ha.onPlay(N),ha.onPause(P),ha.onQuartile(R),ha.onRemainingTimeChange(Q),ha.onClick($),ha.onError(ca),ha.onImpression(M),ha.onExpandedChange(ea),ha.onClose(V),ha.onSkipped(ba),ha.onStopped(X),ha.onComplete(U),ha.onStarted(W),!0}function B(a){var b,c=null,d=[];if(qa&&(c=D(qa)),pa)for(b=0;b<pa.length;b++){var e=D(pa[b]),f=d.length===b;e&&f&&d.push(e)}if(!d.length&&!c)return G("No Compatible Creatives",403),!1;var g,h;if(d.length)for(g=d,h=[],b=0;b<g.length;b++)h.push(E(g[b].vastAd));else g=c,h=E(qa);return ka=g,sa=0,ia=a?a:k.createInstream().init(),ia.on("play",N),ia.on("pause",P),ia.on("time",S),ia.on("playlistItem",K),ia.on("complete",U),ia.on("playlistComplete",X),ia.on("mute",Y),ia.on("instreamClick",_),ia.on("adSkipped",ba),ia.on("error",ca),ia.on("mediaError",ca),ia.loadItem(g,h),!0}function C(a){var b,c=q();return b="flash"===c?g.where(d.api.availableProviders,{name:"flash"}):g.filter(d.api.availableProviders,function(a){return"flash"!==a.name}),g.filter(a,function(a){return g.some(b,function(b){return b.supports(a)})})}function D(a){a.tracker.linear="linear";var b={vastAd:a,sources:[]};na.skipoffset&&(b.skipoffset=na.skipoffset);if(a.adsystem=='ADTECH'||a.adsystem=='atlas'){b.skipoffset=16}for(var c=a.media,e={},f=0;f<c.length;f++){var g=c[f];b.sources.push({file:g.file,type:g.type}),e[g.file]={width:g.width||0,height:g.height||0}}if(b=d.playlist.item(b),b.sources=C(b.sources),0===b.sources.length)return null;ja=(""+b.sources[0].mimeType).toLowerCase(),b.vastAd.selectedMedia=b.sources[0];var h=k.getSafeRegion(!0),i=null,j=null;for(f=0;f<b.sources.length;f++){var l=b.sources[f],m=e[l.file];m.width<=h.width&&(!i||m.width>e[i.file].width)&&(i=l),m.width>=h.width&&(!j||m.width<e[j.file].width)&&(j=l)}return i?(b.vastAd.selectedMedia=i,i["default"]=!0):j&&(b.vastAd.selectedMedia=j,j["default"]=!0),b}function E(a){var b=o.skipoffset>=0?o.skipoffset:null;return{skipoffset:a.skipoffset||na.skipoffset||b,skipMessage:o.skipMessage,skipText:o.skipText}}function F(a){if(ka){var b;if(b=ka.length?ka[a]:ka,b.vastAd)return b.vastAd}else if(pa&&pa.length)return pa[a];return qa}function G(a,b){clearTimeout(la),b=b||900;var c=y();if(c.code=b,c.message=a,pa&&sa<pa.length-1)return void ma.trigger("adPodError",c);var d=F(sa),e=d.tracker;e.error(b),ma.trigger(h.JWPLAYER_AD_ERROR,c)}function H(a){var b=F(sa),c=b.tracker;a.fullscreen&&c.started&&c.fullscreen()}function I(a){ha&&ha.setVolume(a.volume)}function J(a){ha&&ha.setVolume(a.mute?0:k.getVolume())}function K(a){ia&&(ia.on("time",L),sa=a.index)}function L(a){if(0!==a.position){this.off("time",L);var b=F(sa),c=b.tracker;M({linear:c.linear})}}function M(a){var b=F(sa),c=b.tracker,d=fa(b);c.addUrl("impression",d),c.impression(),g.isFunction(p)&&p({type:"url",data:{url:d}});var e=y();e.adposition=na._position||"",e.adtitle=b.adTitle||"",e.adsystem=b.adsystem||"",e.wrapper=b.wrapper||"",e.vastversion=b.vastversion,e.mediafile={file:b.selectedMedia.file},a.linear&&(e.linear=a.linear),ma.trigger(h.JWPLAYER_AD_IMPRESSION,e)}function N(a){clearTimeout(la);var d,e=F(sa),g=e.tracker;if(g.started)a.oldstate===h.state.PAUSED&&(g.resume(),O(a));else{ha&&(g.linear=a.linear);var i=f.extend({linear:g.linear},y(),E(e));i.message=o.dynamicMessage||"",i.clickthrough=e.clickthrough,i.sequence&&(i.podMessage=o.podMessage||""),e.adTitle&&(i.title=e.adTitle),e.companions&&(i.companions=e.companions),k.dispatchEvent(h.JWPLAYER_AD_META,i),e.companions&&(d=y(),d.companions=b(e.companions),k.dispatchEvent(h.JWPLAYER_AD_COMPANIONS,d));var j,l=m;j=f.flashVersion()>9?e.companions:c(e.companions),o.companion&&j&&j.length&&(g.hasComp=l.addCompanion(o.companion,j)),g.start(),g.creativeView(),O(a)}}function O(a){if("static"!==ga&&("vpaid"!==ga||"linear"===a.linear)){var b=y();b.oldstate=a.oldstate,b.newstate=a.newstate,k.dispatchEvent(h.JWPLAYER_AD_PLAY,b)}}function P(a){var b=F(sa),c=b.tracker;c.pause();var d=y();d.oldstate=a.oldstate,d.newstate=a.newstate,k.dispatchEvent(h.JWPLAYER_AD_PAUSE,d)}function Q(a){ra=a.duration?a.duration:Math.max(1,ra,a.remainingTime);var b=ra-a.remainingTime;S({position:b,duration:ra})}function R(a){if(a.duration)ra=a.duration;else{var b=4*a.remainingTime/(4-a.quartile);ra=Math.max(ra,1,b)}S({position:ra*a.quartile*.25,duration:ra})}function S(a){var b=F(sa),c=a.position,d=a.duration,e=o.dynamicMessage||"",f=o.podMessage||"",g=d-c,i=b.tracker;if(i&&i.time(c,d),ia&&e&&g>0){if(e=e.replace(/xx/gi,""+Math.ceil(g)),ka&&ka.length){var j=sa+1;f=f.replace(/__AD_POD_CURRENT__/g,""+j),f=f.replace(/__AD_POD_LENGTH__/g,""+ka.length),e=f+e}ia.setText(e)}var l=y();l.position=c,l.duration=d,k.dispatchEvent(h.JWPLAYER_AD_TIME,l)}function T(){U(),X()}function U(){var a=F(sa),b=a.tracker;b.firedError||(b.complete(),k.dispatchEvent(h.JWPLAYER_AD_COMPLETE,y()))}function V(){var a=F(sa),b=a.tracker;b.firedError||b.close()}function W(){k.dispatchEvent("adStarted",y())}function X(){w(),ma.trigger(h.JWPLAYER_AD_COMPLETE)}function Y(a){var b=F(sa),c=b.tracker;c&&(a.mute?(c.mute(),ha&&ha.setVolume(0)):(c.unmute(),ha&&ha.setVolume(k.getVolume()/100)))}function Z(){var a=F(sa);k.pause(!0),aa(a)}function $(){var a=F(sa);aa(a)}function _(){var a=F(sa),b=ia.getState()===h.state.PAUSED;b||aa(a)}function aa(b){b.tracker.click(),k.dispatchEvent(h.JWPLAYER_AD_CLICK,y());var c=a.jwcast&&a.jwcast.player.id;c||b.clickthrough&&a.open(b.clickthrough)}function ba(){var a=F(sa);a.tracker.skip(),k.dispatchEvent(h.JWPLAYER_AD_SKIPPED,y())}function ca(a){var b=a.message||"Error Playing Ad Tag",c=a.code||400;ha&&g.isFunction(ha.off)&&ha.off(),G(b,c)}function da(){var a="Unable to fetch NonLinear resource",b=502;G(a,b)}function ea(a){var b=F(sa),c=b.tracker;a.expanded?c.expand():c.collapse()}function fa(a){var b=q(),c={d:n.domain,c:"vast",m:b,a:n.account,co:a.tracker.hasComp,p:na._position,ad:a.adsystem,type:a.tracker.linear,ph:n.hosting,ed:n.edition,n:Math.random().toFixed(16).substr(2,16)},d=n.trackingbase,e="?";for(var f in c)d+=e+f+"="+encodeURIComponent(c[f]),e="&";return d}var ga,ha,ia,ja,ka,la,ma=this,na=j.scheduledAd(),oa=j.adBuffet(),pa=j.adPod(),qa=oa.length?oa[0]:null,ra=0,sa=0;f.extend(ma,k.Events),this.init=function(a){if(ma.init=function(){throw"vast.adplayer can only be initialized once"},qa&&x(qa),pa)for(var b=0;b<pa.length;b++)x(pa[b]);var c=pa&&pa.length?pa[0]:qa,d=c.media[0];ga=(""+d.adType).toLowerCase(),ja=d.type;var e;if("vpaid"===ga){if(e=A(a,c),!e)return!1}else if("static"===ga)z(c),v(a);else if(e=B(a),v(a),!e)return!1;return k.onFullscreen(H),k.onVolume(I),k.onMute(J),!0},ma.getState=function(){return ia?ia.getState():ha?ha.getState():""},ma.clearNonlinear=function(){l.stop(),ha&&(u(),ha&&(ha.stop(),ha.destroy(),ha=null))},ma.destroy=function(){ma.off(),w(),null!==ma&&(ia&&ia.destroy(),ha&&(u(),ha&&ha.destroy()),ma.clearNonlinear(),ma=j=k=ha=ia=n=na=oa=qa=pa=null)},ma.pause=function(){ia?ia.pause():ha&&ha.pause()},ma.play=function(){ia?ia.play():ha&&ha.play()}}}(window),function(a){function b(a){return a._adQueue&&a._waterfallIndex<a._adQueue.length}var c=a.vast,d=a.utils,e=a.events,f=a._,g="-1";c.adcontroller=function(h,i,j){function k(a){if(a){ca&&(G(ca),ca=null);var b=function(b){ca=null;try{c.vmapparser(b.responseXML,W)}catch(d){return void T({id:g,message:"Error parsing VMAP",code:1002,vmap:a})}if(ba&&(V(W),ia)){var f=o({type:e.JWPLAYER_MEDIA_BEFOREPLAY});f===!0&&Q()}},f=function(b){ca=null,d.log(b),T({id:g,message:"Error Loading VMAP Schedule",code:"Timeout"===b?1007:1008,vmap:a})};ca=d.ajax(a,b,f,{requireValidXML:!0,timeout:5e3})}}function l(){ba=!0,Z=new c.staticplayer(h,j),$=new c.companion(sa);var b=new d.key(ta),e=b.edition(),g="//jwpltx.com/v1/adclient/ping.gif";"file:"===window.location.protocol&&(g="https:"+g),da.trackingbase=g,da.account=b.token(),da.domain=U(),da.edition=f.indexOf(["pro","premium","ads","invalid","enterprise"],e)+1,da.hosting=a.defaults&&a.defaults.ph?a.defaults.ph:0,aa=c.configparser.getOptParams(i)}function m(a){la=!!a.active}function n(a){_.trigger(e.state.PLAYING,a)}function o(a){if(!la){var b=W.getPreRoll();return ca?void w():!(!fa&&b)||(Y=r(b),void s(b,a))}}function p(a){if(!la){var b=W.getNextMidRoll(a.position,a.duration);b&&(Y=r(b),t(b,a))}}function q(a){if(!la){var b=W.getPostRoll();!ga&&b&&(Y=r(b),u(b,a))}}function r(a){return a._trackers?new c.tracker(a._trackers,sa):null}function s(a,b){a._position="pre",fa=!0,a._id=B(12),v(a,b)}function t(a,b){a._position="mid",a._id=B(12),v(a,b)}function u(a,b){a._position="post",ga=!0,h.detachMedia(),a._id=B(12),v(a,b)}function v(a,b){if(ea=a._position,clearTimeout(oa),oa=-1,"nonlinear"!==a._type&&!ia){var c=d.isMobile()&&!ra&&("pre"===ea||h.isBeforePlay()||0===h.getPosition());c?(b&&b.type===e.JWPLAYER_MEDIA_BEFOREPLAY||h.getState()===e.state.IDLE)&&(_.off(e.state.PLAYING,w),_.once(e.state.PLAYING,w)):w()}a._adXML?(a._currentTag=a._currentTag||"clientloadedtag_"+ha++,A(a)):a._adQueue?z(a):(d.log("scheduled ad has no url or xml",a),Q())}function w(){ia=h.createInstream().init(),_.trigger("blockingStarted")}function x(a){var b=W;y(a),b!==W&&W.isVMAP()&&k(c.doReplacement(W.getVMAP(),h,U(),aa))}function y(a){var b=h.getPlaylistItem(a.index);W=f.isObject(b)&&b.adschedule?c.configparser.getSchedule(b):X,K(),L(),P(),ga=!1,fa=!1,V(W),W.reset()}function z(a){ma=a;var b=a._waterfallIndex||0,d=a._adQueue[b],e=c.doReplacement(d,h,U(),aa);a._waterfallIndex=b+1,a._currentTag=e,f.isFunction(sa)&&sa({type:"tagReplacement",data:{actualTag:e,originalTag:d}}),C(a,e),E(a).load(e)}function A(a){a._currentTag=a._currentTag||a._adXML.toString(),C(a,a._currentTag),E(a).parseXmlString(a._adXML)}function B(a){return new Array(a+1).join((Math.random().toString(36)+"00000000000000000").slice(2,18)).slice(0,a)}function C(a,b){h.dispatchEvent("adRequest",D(a,b))}function D(a,b){var c=a._adQueue||{},d={},e=a.adbreakid,g=a._adTagQueue,h=a.skipoffset;if(e&&(d.adbreakid=e),g){var i=a._waterfallIndex-1;i=i<0?0:i,d.adtagid=g[i]}return f.isUndefined(h)||(d.skipoffset=h),f.extend(d,{id:a._id,tag:b||a._currentTag,client:"vast",adposition:a._position,offset:a._offSet,witem:a._waterfallIndex||1,wcount:c.length||1})}function E(a){var b=new c.vloader(a,h);return b.on(e.COMPLETE,H),b.on(e.ERROR,S),b.on("adPodError",R),ja.push(b),b}function F(a){for(var b=ja.length;b--;)ja[b]===a&&(ja.splice(b,1),a.destroy())}function G(a){a.onload=null,a.onreadystatechange=null,a.onerror=null,"abort"in a&&a.abort()}function H(a){var b=a.vloader.scheduledAd();null===ia&&"nonlinear"!==b._type?(_.off("blockingStarted"),_.once("blockingStarted",function(){I(a)})):I(a)}function I(a){var b=a.vloader;clearTimeout(oa),oa=-1,ma.isWaterfalling||P(),F(b);var d=new c.adplayer(b,h,Z,$,da,aa,sa);d.on(e.JWPLAYER_AD_ERROR,M),d.on(e.JWPLAYER_AD_IMPRESSION,N),d.on("adPodError",T);var f=d.init(ia);return f?(pa=ia,ia=null,_.off("blockingStarted"),_.off(e.state.PLAYING,w),d.on(e.JWPLAYER_AD_COMPLETE,O),void ka.push(d)):void d.destroy()}function J(){P(),ga=!1,fa=!1}function K(){for(var a=ja.length;a--;){var b=ja[a];ja.length--,b.destroy()}}function L(){for(var a=ka.length;a--;){var b=ka[a];ka.length--,b.destroy()}}function M(a){if(na=!1,T(a),!na&&b(ma)){ia=ia||pa;var c=f.extend({},ma);return c._offset=0,c.isWaterfalling=!0,void v(c)}L(),na=!1,oa=setTimeout(function(){oa=-1,0===ja.length&&("post"===ea&&h.attachMedia(),Q())},0)}function N(a){ma={},Y&&!Y.started&&Y.breakStart(),h.dispatchEvent(e.JWPLAYER_AD_IMPRESSION,a)}function O(){Y&&Y.breakEnd(),0===ja.length&&"post"===ea&&h.attachMedia()}function P(){if(ka.length){var a=ka[ka.length-1];a.clearNonlinear()}}function Q(){ia&&(ia.destroy(),ia=null,_.off("blockingStarted"),_.off(e.state.PLAYING,w)),pa=null}function R(a){var b=a.vloader,c=D(b.scheduledAd(),a.url);c.message=a.message,c.code=a.code,a.wrappedUrl!==a.url&&(c.wrappedTag=a.wrappedUrl),na=!1,T(c)}function S(a){var d=a.vloader,g=d.allAds();if(F(d),g&&g.length){var h=g[0];if(h){var i=h.trackers;if(i&&i.error){var j=new c.tracker(i,sa);j.error(a.code)}}}if(R(a),!na&&b(ma)){var k=f.extend({},ma);return k._offset=0,k.isWaterfalling=!0,void v(k)}_.off(e.state.PLAYING,w),L(),na=!1,oa===-1&&(oa=setTimeout(function(){oa=-1,0===ja.length&&Q()},0))}function T(a){d.extend(a,{client:"vast"}),Y&&Y.error(a.code),h.dispatchEvent(e.JWPLAYER_AD_ERROR,a)}function U(){var a=window.location.href;return a=a.match(new RegExp(/^[^\/]*:\/\/\/?([^\/]*)/)),a&&a.length>1?a[1]:""}function V(a){var b=a.getMidRolls(),c=[];b.length&&d.foreach(b,function(a,b){"nonlinear"!==b._type&&c.push({begin:b._offSet,text:aa.cuetext})}),h.setCues(c)}var W,X,Y,Z,$,_=this,aa={},ba=!1,ca=null,da={},ea="",fa=!1,ga=!1,ha=0,ia=null,ja=[],ka=[],la=!1,ma={},na=!1,oa=-1,pa=null,qa=h.getConfig(),ra=!!qa.sdkplatform,sa=null;d.extend(_,h.Events),i.debug&&i.trackFn&&(sa=i.trackFn),X=W=c.configparser.getSchedule(i),W.isVMAP()&&k(c.doReplacement(W.getVMAP(),h,U(),aa)),h.on({ready:l,beforePlay:o,cast:m,play:n,time:p,beforeComplete:q,playlistItem:x,playlistComplete:y,complete:J},_),function(a,b){a.jwplayerEntitlements=b(),"object"==typeof module&&module.exports?module.exports=b():"function"==typeof define&&define.amd&&define([],b)}(this,function(){return function(a,b,c){var d=new a.key(b).token(),e=["//entitlements.jwplayer.com/",d,".json"];"file:"===window.location.protocol&&e.unshift("https:");var f={canPlayAds:!0};a.ajax(e.join(""),function(a){f.canPlayAds=!0,c(f)},function(){c(f)},{timeout:1e4,responseType:"json"})}});var ta=qa.key;this.jwplayerEntitlements(d,ta,function(a){if(!a.canPlayAds){h.off(null,null,_),h.pauseAd=h.playAd=d.noop;var b={id:g,code:900,message:"Ad Limit Reached"};M(b),_.destroy()}}),_.destroy=function(){ca&&(G(ca),ca=null),K(),L(),P(),h.setCues([])},h.pauseAd=function(a){if(a=!f.isBoolean(a)||a,ka.length){var b=ka[ka.length-1];a?b.pause():b.play()}},h.playAd=function(a){na=!0,P();var b;b=f.isArray(a)?a.slice(0):[a];var c={_id:B(12),_adQueue:b,_waterfallIndex:0,_offset:0,_position:"api"};v(c)}},a().registerPlugin("vast","7.1",c.adcontroller,"vast.swf")}(window.jwplayer);